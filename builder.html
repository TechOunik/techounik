<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio & Resume Factory | OBI_SEC</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #165b33; --accent: #d42426; --bg: #f8f9fa; --text: #333; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); padding: 40px 20px; color: var(--text); }
        .container { max-width: 950px; margin: 0 auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.1); }
        
        h1 { text-align: center; color: var(--primary); font-size: 2.2rem; margin-bottom: 10px; }
        .subtitle { text-align: center; color: #666; margin-bottom: 40px; }

        /* THEME SELECTION */
        .category-filter { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .cat-btn { padding: 8px 15px; border: 1px solid #ddd; border-radius: 20px; cursor: pointer; background: white; transition: 0.3s; font-size: 0.9rem; }
        .cat-btn.active, .cat-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }

        .theme-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; max-height: 500px; overflow-y: auto; padding: 10px; border: 1px solid #eee; border-radius: 10px; margin-bottom: 30px; }
        .theme-card { border: 2px solid #eee; border-radius: 10px; padding: 15px; cursor: pointer; text-align: center; transition: 0.3s; position: relative; background: #fff; }
        .theme-card:hover { transform: translateY(-3px); border-color: #ccc; }
        .theme-card.selected { border-color: var(--primary); background: #e8f5e9; box-shadow: 0 0 15px rgba(22, 91, 51, 0.2); }
        
        .color-bubbles { display: flex; justify-content: center; gap: 5px; margin-top: 10px; }
        .bubble { width: 12px; height: 12px; border-radius: 50%; border: 1px solid rgba(0,0,0,0.1); }

        /* FORM */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full-width { grid-column: span 2; }
        label { display: block; margin-top: 15px; font-weight: bold; font-size: 0.9rem; color: #555; }
        input, textarea, select { width: 100%; padding: 12px; margin-top: 5px; border: 2px solid #eee; border-radius: 8px; box-sizing: border-box; font-family: inherit; }
        input:focus, textarea:focus { border-color: var(--primary); outline: none; }

        /* UPLOAD */
        .file-upload { border: 2px dashed #ccc; padding: 20px; text-align: center; border-radius: 10px; margin-top: 5px; cursor: pointer; transition: 0.3s; }
        .file-upload:hover { border-color: var(--primary); background: #f9fffb; }
        #preview-img { max-width: 100px; max-height: 100px; border-radius: 50%; margin-top: 15px; display: none; border: 3px solid var(--primary); object-fit: cover; }

        .btn-generate { width: 100%; padding: 18px; background: var(--primary); color: white; border: none; border-radius: 10px; font-size: 1.2rem; font-weight: bold; margin-top: 30px; cursor: pointer; transition: 0.3s; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .btn-generate:hover { background: #0f4224; transform: scale(1.02); }

        /* PREVIEW MODAL */
        .modal { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.85); backdrop-filter: blur(5px); }
        .modal-content { background-color: #fefefe; margin: 2vh auto; width: 95%; height: 95vh; border-radius: 10px; overflow: hidden; display: flex; flex-direction: column; }
        .modal-header { padding: 15px 20px; background: #eee; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd; }
        .preview-frame { width: 100%; height: 100%; border: none; flex-grow: 1; background: white; }
        
        .action-area { display: flex; gap: 10px; align-items: center; }
        .btn-download { background: var(--accent); color: white; padding: 10px 20px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; animation: pulse 2s infinite; }
        .btn-close { background: #ddd; color: #333; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        
        #unlockCode { padding: 10px; border: 2px solid var(--primary); border-radius: 5px; width: 120px; display: none; text-align: center; font-weight: bold; letter-spacing: 2px; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @media(max-width: 600px) { .form-grid { grid-template-columns: 1fr; } .full-width { grid-column: span 1; } }
    </style>
</head>
<body>

<div class="container">
    <h1>üè≠ Portfolio Factory</h1>
    <p class="subtitle">Design, Preview, and Launch. <strong>Try any theme for free.</strong></p>

    <div class="full-width">
        <label>Step 1: Select a Design</label>
        <div class="category-filter">
            <button class="cat-btn active" onclick="filterThemes('all')">All</button>
            <button class="cat-btn" onclick="filterThemes('tech')">Tech / Cyber</button>
            <button class="cat-btn" onclick="filterThemes('creative')">Creative / Bold</button>
            <button class="cat-btn" onclick="filterThemes('medical')">Medical / Clean</button>
            <button class="cat-btn" onclick="filterThemes('resume')">Resumes</button>
        </div>
        <div class="theme-grid" id="themeGrid"></div>
        <input type="hidden" id="selectedThemeId" value="neon_nexus">
    </div>

    <form id="portfolioForm">
        <div class="form-grid">
            <div class="full-width">
                <label>Profile Picture (PNG Only - Max 2MB)</label>
                <div class="file-upload" onclick="document.getElementById('photoInput').click()">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; color:#888;"></i>
                    <p style="margin:5px 0;">Click to Upload PNG</p>
                    <input type="file" id="photoInput" accept="image/png" style="display:none" onchange="handleImageUpload()">
                </div>
                <center><img id="preview-img"></center>
                <input type="hidden" id="base64Image">
            </div>

            <div><label>Full Name</label><input type="text" id="fullName" placeholder="e.g. Obioma Uzoh"></div>
            <div><label>Job Title</label><input type="text" id="jobTitle" placeholder="e.g. Cyber Analyst"></div>
            <div class="full-width"><label>Professional Bio</label><textarea id="bio" rows="3" placeholder="I am a passionate professional..."></textarea></div>
            <div><label>Email</label><input type="email" id="email" placeholder="contact@me.com"></div>
            <div><label>Link (LinkedIn/GitHub)</label><input type="text" id="social" placeholder="https://..."></div>
            <div class="full-width"><label>Top Skills (Comma separated)</label><input type="text" id="skills" placeholder="HTML, Python, Nursing, Design..."></div>
        </div>

        <button type="button" class="btn-generate" onclick="generatePreview()">
            <i class="fas fa-magic"></i> Generate & Preview Site
        </button>
    </form>
</div>

<div id="previewModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <div><strong>Live Preview</strong> <span style="font-size:0.8rem; color:#666;">(This is how your site looks!)</span></div>
            <div class="action-area">
                <input type="text" id="unlockCode" placeholder="ENTER KEY">
                <button id="btn-pay" class="btn-download" onclick="startPaymentFlow()">üîì Unlock Download (‚Ç¶2,000)</button>
                <button id="btn-download" class="btn-download" onclick="verifyAndDownload()" style="display:none; background:#165b33;">‚¨áÔ∏è Download File</button>
                
                <button class="btn-close" onclick="closePreview()">Edit</button>
            </div>
        </div>
        <iframe id="previewFrame" class="preview-frame"></iframe>
    </div>
</div>

<script>
    /* ================= 1. THE 20 THEMES DATABASE ================= */
    const themes = [
        // TECH & CYBER
        { id: 'neon_nexus', name: 'Neon Nexus', cat: 'tech', icon: 'üåå', c: { bg:'#000000', txt:'#E0E0E0', p:'#D500F9', a:'#00E5FF', card:'#111' } },
        { id: 'tech_kal', name: 'Tech Kaleidoscope', cat: 'tech', icon: 'üî≠', c: { bg:'#0a0a0a', txt:'#fff', p:'#008080', a:'#FF00FF', card:'#1f1f1f' } },
        { id: 'spec_inno', name: 'Spectrum Innovation', cat: 'tech', icon: 'üíé', c: { bg:'#f0f8ff', txt:'#333', p:'#4169E1', a:'#EE82EE', card:'#fff' } },
        { id: 'chroma_code', name: 'Chromatic Code', cat: 'tech', icon: 'ü©∏', c: { bg:'#ffffff', txt:'#333', p:'#DC143C', a:'#36454F', card:'#f4f4f4' } },
        { id: 'elec_hues', name: 'Electric Hues', cat: 'tech', icon: '‚ö°', c: { bg:'#000080', txt:'#fff', p:'#00BFFF', a:'#39FF14', card:'#000050' } },
        { id: 'vivid_circ', name: 'Vivid Circuits', cat: 'tech', icon: 'üîã', c: { bg:'#2F4F4F', txt:'#fff', p:'#50C878', a:'#FFD700', card:'#3a5f5f' } },
        { id: 'color_wave', name: 'Colourwave Tech', cat: 'tech', icon: 'üåä', c: { bg:'#00008B', txt:'#fff', p:'#40E0D0', a:'#00FFFF', card:'#0000cd' } },
        { id: 'rad_net', name: 'Radiant Networks', cat: 'tech', icon: '‚ú®', c: { bg:'#C0C0C0', txt:'#000', p:'#0F52BA', a:'#FFBF00', card:'#e0e0e0' } },
        { id: 'cyber_spec', name: 'Cyber Spectrum', cat: 'tech', icon: 'üëæ', c: { bg:'#0b0b0b', txt:'#fff', p:'#7F00FF', a:'#BFFF00', card:'#1c1c1c' } },
        { id: 'glitch_glow', name: 'Glitch & Glow', cat: 'tech', icon: '‚ö†Ô∏è', c: { bg:'#333', txt:'#fff', p:'#FF3131', a:'#00FFFF', card:'#444' } },
        { id: 'bright_byte', name: 'Bright Bytes', cat: 'tech', icon: 'üçè', c: { bg:'#000080', txt:'#fff', p:'#32CD32', a:'#FFFFFF', card:'#0000a0' } },

        // CREATIVE
        { id: 'pixel_parade', name: 'Pixel Parade', cat: 'creative', icon: 'üé®', c: { bg:'#FFFDE7', txt:'#333', p:'#FF7F50', a:'#87CEEB', card:'#fff' } },
        { id: 'digi_rain', name: 'Digital Rainbow', cat: 'creative', icon: 'üåà', c: { bg:'#fff', txt:'#333', p:'#FF0000', a:'#0000FF', card:'#f9f9f9' } },
        { id: 'rgb_rev', name: 'RGB Revolution', cat: 'creative', icon: 'üî¥', c: { bg:'#111', txt:'#fff', p:'#FF0000', a:'#00FF00', card:'#222' } },
        { id: 'neon_future', name: 'Neon Future', cat: 'creative', icon: 'üöÄ', c: { bg:'#000', txt:'#fff', p:'#FF69B4', a:'#00FFFF', card:'#1a1a1a' } },
        { id: 'full_color', name: 'Tech In Color', cat: 'creative', icon: 'üé≠', c: { bg:'#fff', txt:'#333', p:'#FFA500', a:'#800080', card:'#f0f0f0' } },
        { id: 'pix_pulse', name: 'Pixel Pulse', cat: 'creative', icon: 'üíì', c: { bg:'#000', txt:'#fff', p:'#FF00FF', a:'#BF00FF', card:'#222' } },

        // MEDICAL / CLEAN
        { id: 'prism_proto', name: 'Prism Protocol', cat: 'medical', icon: 'üí†', c: { bg:'#E0FFFF', txt:'#333', p:'#4B0082', a:'#E6E6FA', card:'#fff' } },
        { id: 'holo_dream', name: 'HoloTech Dreams', cat: 'medical', icon: 'ü¶Ñ', c: { bg:'#FFB6C1', txt:'#333', p:'#ADD8E6', a:'#FFFFE0', card:'#fff' } },
        { id: 'lum_logic', name: 'Luminous Logic', cat: 'medical', icon: 'üí°', c: { bg:'#708090', txt:'#fff', p:'#F0E68C', a:'#F5F5F5', card:'#778899' } },

        // RESUME (Special)
        { id: 'simple_cv', name: 'Classic Resume', cat: 'resume', icon: 'üìÑ', c: { bg:'#fff', txt:'#000', p:'#333', a:'#000', card:'#fff' } }
    ];

    /* ================= 2. RENDER THEMES ================= */
    const grid = document.getElementById('themeGrid');
    
    function renderThemes(filter) {
        grid.innerHTML = '';
        themes.forEach(t => {
            if (filter === 'all' || t.cat === filter) {
                const card = document.createElement('div');
                card.className = `theme-card ${t.id === document.getElementById('selectedThemeId').value ? 'selected' : ''}`;
                card.onclick = () => selectTheme(t.id, card);
                
                const bubbles = `
                    <div class="color-bubbles">
                        <div class="bubble" style="background:${t.c.p}"></div>
                        <div class="bubble" style="background:${t.c.a}"></div>
                        <div class="bubble" style="background:${t.c.bg}"></div>
                    </div>`;

                card.innerHTML = `<div style="font-size:1.5rem;">${t.icon}</div><strong>${t.name}</strong>${bubbles}`;
                grid.appendChild(card);
            }
        });
    }
    renderThemes('all');

    function filterThemes(cat) {
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        renderThemes(cat);
    }

    function selectTheme(id, el) {
        document.getElementById('selectedThemeId').value = id;
        document.querySelectorAll('.theme-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
    }

    /* ================= 3. IMAGE SECURITY ================= */
    function handleImageUpload() {
        const input = document.getElementById('photoInput');
        const file = input.files[0];
        if (file) {
            if (file.type !== 'image/png') { alert("Please use a PNG file."); input.value = ''; return; }
            if (file.size > 2 * 1024 * 1024) { alert("Max 2MB."); return; }
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('base64Image').value = e.target.result;
                document.getElementById('preview-img').src = e.target.result;
                document.getElementById('preview-img').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    }

    /* ================= 4. PREVIEW GENERATOR ================= */
    function generatePreview() {
        const id = document.getElementById('selectedThemeId').value;
        const name = document.getElementById('fullName').value;
        const role = document.getElementById('jobTitle').value;
        const bio = document.getElementById('bio').value;
        const email = document.getElementById('email').value;
        const social = document.getElementById('social').value;
        const img = document.getElementById('base64Image').value || 'https://via.placeholder.com/150';
        const skillsHTML = document.getElementById('skills').value.split(',').map(s => `<span>${s.trim()}</span>`).join('');

        if (!name || !role) { alert("Please enter at least Name and Job Title."); return; }

        const t = themes.find(x => x.id === id);
        let html = "";

        if (t.cat === 'resume') {
            // --- RESUME TEMPLATE ---
            html = `<!DOCTYPE html><html><head><title>${name}</title><style>body{font-family:serif;max-width:800px;margin:20px auto;padding:40px;border:1px solid #ddd}header{border-bottom:2px solid #000;padding-bottom:20px;display:flex;justify-content:space-between}h1{margin:0;font-size:2.5rem}.section{margin-top:20px}h3{background:#eee;padding:5px}img{width:100px;}</style></head><body><header><div><h1>${name}</h1><p>${role} | ${email}</p></div><img src="${img}"></header><div class="section"><h3>PROFILE</h3><p>${bio}</p></div><div class="section"><h3>SKILLS</h3><p>${document.getElementById('skills').value}</p></div></body></html>`;
        } else {
            // --- WEBSITE TEMPLATE ---
            const css = `
                :root { --p: ${t.c.p}; --a: ${t.c.a}; --bg: ${t.c.bg}; --txt: ${t.c.txt}; --c: ${t.c.card}; }
                body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--txt); margin: 0; padding: 0; }
                .hero { text-align: center; padding: 60px 20px; background: var(--c); border-bottom: 3px solid var(--a); }
                .avatar { width: 140px; height: 140px; border-radius: 50%; border: 4px solid var(--p); object-fit: cover; }
                h1 { font-size: 2.5rem; margin: 10px 0; color: var(--p); }
                .role { font-size: 1.1rem; color: var(--a); font-weight: bold; letter-spacing: 2px; text-transform: uppercase; }
                .container { max-width: 900px; margin: 0 auto; padding: 30px; }
                .card { background: var(--c); padding: 25px; border-radius: 12px; margin-bottom: 20px; border-left: 5px solid var(--p); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
                h2 { color: var(--p); border-bottom: 1px solid var(--a); padding-bottom: 5px; }
                .skills span { display: inline-block; background: var(--p); color: var(--bg); padding: 5px 15px; border-radius: 20px; margin: 5px; font-weight: bold; font-size: 0.9rem; }
                .btn { display: inline-block; padding: 12px 30px; background: var(--a); color: var(--bg); text-decoration: none; border-radius: 5px; margin-top: 15px; font-weight: bold; }
            `;
            html = `<!DOCTYPE html><html><head><title>${name}</title><style>${css}</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"></head><body><div class="hero"><img src="${img}" class="avatar"><h1>${name}</h1><div class="role">${role}</div><p style="max-width:600px; margin:15px auto; opacity:0.9">${bio}</p><a href="mailto:${email}" class="btn">Contact Me</a>${social?` <a href="${social}" class="btn" style="background:var(--p)">Social</a>`:''}</div><div class="container"><div class="card"><h2><i class="fas fa-code"></i> Skills</h2><div class="skills">${skillsHTML}</div></div><div class="card"><h2><i class="fas fa-user-tie"></i> About</h2><p>${bio}</p></div><footer style="text-align:center; padding:30px; font-size:0.8rem; opacity:0.6;">Generated by OBI_SEC Factory</footer></div></body></html>`;
        }

        const iframe = document.getElementById('previewFrame');
        iframe.srcdoc = html;
        document.getElementById('previewModal').style.display = "block";
        
        // Reset Modal State
        document.getElementById('unlockCode').style.display = 'none';
        document.getElementById('btn-download').style.display = 'none';
        document.getElementById('btn-pay').style.display = 'block';
        document.getElementById('unlockCode').value = '';
    }

    function closePreview() {
        document.getElementById('previewModal').style.display = "none";
    }

    /* ================= 5. PAYMENT & UNLOCK FLOW ================= */
    function startPaymentFlow() {
        const name = document.getElementById('fullName').value;
        const themeId = document.getElementById('selectedThemeId').value;
        const themeName = themes.find(t => t.id === themeId).name;
        const phone = "2347037819640"; // YOUR WHATSAPP NUMBER

        const msg = `*UNLOCK REQUEST*%0A%0ATheme: ${themeName}%0AName: ${name}%0A%0A_I have previewed my site and want to pay ‚Ç¶2,000 for the Unlock Key._`;
        window.open(`https://wa.me/${phone}?text=${msg}`, '_blank');

        // Show Input Field
        document.getElementById('btn-pay').style.display = 'none';
        document.getElementById('unlockCode').style.display = 'block';
        document.getElementById('btn-download').style.display = 'block';
        alert("Step 1: Complete payment on WhatsApp.\nStep 2: I will send you a KEY.\nStep 3: Enter the key to download.");
    }

    function verifyAndDownload() {
        const userCode = document.getElementById('unlockCode').value;
        const SECRET_KEY = "OBI-77"; // YOUR SECRET PASSWORD

        if (userCode === SECRET_KEY) {
            const htmlContent = document.getElementById('previewFrame').srcdoc;
            const element = document.createElement('a');
            element.setAttribute('href', 'data:text/html;charset=utf-8,' + encodeURIComponent(htmlContent));
            element.setAttribute('download', 'index.html');
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
            alert("‚úÖ Key Accepted! Downloading...");
            closePreview();
        } else {
            alert("‚ùå Invalid Unlock Key! Payment required.");
        }
    }
</script>

</body>
</html>
